-----------
-- PLANTILLA --
-----------

<!---
# Plantilla H1
## Plantilla H2
### Plantilla H3
-->
<!--- <img src="https://phoneky.co.uk/thumbs/screensavers/down/original/linux_3rj131p8.gif" />
-->

‚≠êÔ∏è **PLANTILLA** ‚≠êÔ∏è

| üî•PLANTILLA TALBA‚ùóüî• | 
| ------------- |
| *Plantilla* |


--------------------------------------------------------------------------------

## 8 semanas

# UF1 - DATA AT REST

## ACL

## LVM [APUNTES]

* dd if=/dev/zero of=disk01.img bs=1k count=100k

```
isx36579183@i11:/opt/lvm$ su -l
Password: 
root@i11:~# cd /opt/lvm
root@i11:/opt/lvm# mkdir repaso
root@i11:/opt/lvm# cd repaso/
root@i11:/opt/lvm/repaso# dd if=/dev/zero of=disk01.img bs=1k count=100k
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.115096 s, 911 MB/s
root@i11:/opt/lvm/repaso# dd if=/dev/zero of=disk02.img bs=1k count=100k
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.111919 s, 937 MB/s
root@i11:/opt/lvm/repaso# dd if=/dev/zero of=disk03.img bs=1k count=100k
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.110733 s, 947 MB/s
root@i11:/opt/lvm/repaso# 


```

* losetup -a

* sudo losetup /dev/loop1 disk01.img

* sudo losetup /dev/loop1 disk02.img

* sudo losetup /dev/loop1 disk02.img


```
# Antes

root@i11:/opt/lvm/repaso# losetup -a
/dev/loop1: [66306]:4333635 (/var/lib/snapd/snaps/msnake_10.snap)
/dev/loop0: [66306]:4333633 (/var/lib/snapd/snaps/core_11993.snap)



root@i11:/opt/lvm/repaso# losetup /dev/loop2 disk01.img 
root@i11:/opt/lvm/repaso# losetup /dev/loop3 disk02.img 
root@i11:/opt/lvm/repaso# losetup /dev/loop4 disk03.img 

# Despu√©s

root@i11:/opt/lvm/repaso# loosetup -a
/dev/loop1: [66306]:4333635 (/var/lib/snapd/snaps/msnake_10.snap)
/dev/loop4: [66306]:5245312 (/opt/lvm/repaso/disk03.img)
/dev/loop2: [66306]:5245310 (/opt/lvm/repaso/disk01.img)
/dev/loop0: [66306]:4333633 (/var/lib/snapd/snaps/core_11993.snap)
/dev/loop3: [66306]:5245311 (/opt/lvm/repaso/disk02.img)
root@i11:/opt/lvm/repaso# 

```


PE = UNIDAD B√ÅSICA DE ASIGNACI√ìN. 

    * A la hora de hacer los Vol√∫menes F√≠sicos se pierde un porcentaje de informaci√≥n.


* pvcreate /dev/loop2 /dev/loop3 /dev/loop4 --> Creamos los discos f√≠sicos en PV (Physical Volume)

```
root@i11:/opt/lvm/repaso# pvcreate /dev/loop2 /dev/loop3 /dev/loop4
  Physical volume "/dev/loop2" successfully created.
  Physical volume "/dev/loop3" successfully created.
  Physical volume "/dev/loop4" successfully created.
root@i11:/opt/lvm/repaso# 

```

* Verificamos con pvdisplay

```
root@i11:/opt/lvm/repaso# pvcreate /dev/loop2 /dev/loop3 /dev/loop4
  Physical volume "/dev/loop2" successfully created.
  Physical volume "/dev/loop3" successfully created.
  Physical volume "/dev/loop4" successfully created.
root@i11:/opt/lvm/repaso# 

```

* vgcreate diskedt /dev/loop2 /dev/loop3 --> Los agrupamos con VG (Volume Group)
```
root@i11:/opt/lvm/repaso# vgdisplay
  --- Volume group ---
  VG Name               diskedt
  System ID             
  Format                lvm2
  Metadata Areas        2
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                2
  Act PV                2
  VG Size               192.00 MiB
  PE Size               4.00 MiB
  Total PE              48
  Alloc PE / Size       0 / 0   
  Free  PE / Size       48 / 192.00 MiB
  VG UUID               w9D5xX-1U22-60sW-qWeN-WNEE-RolO-21hej9
   
root@i11:/opt/lvm/repaso# 


```


* Los espacios de **100M** de **loop2** y **loop3** se juntan para crear un **dispositivo f√≠sico de 200M** llamado **/dev/diskedt** (No aparece hasta particionarlo) (Aprox de 192M).

       * Se pierde espacio de almacenamiento debido a crear estructuras para la gesti√≥n LVM.

       * PE =

* Observamos el antes y despu√©s de asignar **PHYSICAL VOLUMES** al **VOLUME GROUP**

```
# ANTES

root@i11:/opt/lvm# pvdisplay /dev/loop2
  --- Physical volume ---
  PV Name               /dev/loop2
  VG Name               diskedt
  PV Size               100.00 MiB / not usable 4.00 MiB
  Allocatable           yes 
  PE Size               4.00 MiB
  Total PE              24
  Free PE               24
  Allocated PE          0
  PV UUID               lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k
   
# DESPUES

root@i11:/opt/lvm# pvdisplay /dev/loop2
  "/dev/loop2" is a new physical volume of "100.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/loop2
  VG Name               
  PV Size               100.00 MiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k


```


#### LV (LOGICAL VOLUME) --> Crea vol√∫menes l√≥gicos.

* Cuando ya tengamos los **VOLUME GROUP** podemos hacer particiones llamadas **Logical Volume**.

       * Creamos **2 particiones**: **50M** llamado **sistema** y **150M** llamado **dades**.


############
* lvcreate -L [tama√±o[-l50%FREE / -l50%VG]][IMPORTANTE_EXAMEN]

    * -L --> Tama√±o en M

    * -l50%FREE --> Todo lo que quede LIBRE lo a√±adir√°.

    * -l50%VG --> A√±adir√° la mitad del DISCO.
############



```

root@i11:/opt/lvm# lvcreate -L 50M -n sistema /dev/diskedt
  Rounding up size to full physical extent 52.00 MiB
  Logical volume "sistema" created.


# Da error en la segunda

^**** PE = No hay suficiente FREE SPACE, Necesitas 38 PE, te quedan 35 PE

***** PE X 4 = PE ES UN BLOQUE DE INFORMACI√ìN que vale por 4. Es el 4 por ciento.


root@i11:/opt/lvm# lvcreate -L 150M -n dades /dev/diskedt
  Rounding up size to full physical extent 152.00 MiB
  Volume group "diskedt" has insufficient free space (35 extents): 38 required.
root@i11:/opt/lvm# 

## Para SOLUCIONARLO:



root@i11:/opt/lvm# lvcreate -l100%FREE -n dades /dev/diskedt
  Logical volume "dades" created.



## MOSTRAMOS

***** Hace de 140M y en total usa 35 PE, 35 y 13 = 48 PE.

root@i11:/opt/lvm# lvdisplay
  --- Logical volume ---
  LV Path                /dev/diskedt/sistema
  LV Name                sistema
  VG Name                diskedt
  LV UUID                KamHDK-LQGC-g0B8-VZ3a-vxd8-sYkZ-nBc6Oc
  LV Write Access        read/write
  LV Creation host, time i11, 2022-02-09 09:30:35 +0100
  LV Status              available
  # open                 0
  LV Size                52.00 MiB
  Current LE             13
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:0
   
  --- Logical volume ---
  LV Path                /dev/diskedt/dades
  LV Name                dades
  VG Name                diskedt
  LV UUID                ZEEOn6-uidr-yzQ3-jZ8A-Yfsd-ORy2-EitpXm
  LV Write Access        read/write
  LV Creation host, time i11, 2022-02-09 09:31:56 +0100
  LV Status              available
  # open                 0
  LV Size                140.00 MiB
  Current LE             35
  Segments               2
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:1
   
root@i11:/opt/lvm# 




# Hacemos un TREE

root@i11:/opt/lvm# tree /dev/disk
/dev/disk
‚îú‚îÄ‚îÄ by-id
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ata-WDC_WD10JMVW-59AJGS3_WD-WXJ1E65AUSRD -> ../../sda
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ata-WDC_WD10JMVW-59AJGS3_WD-WXJ1E65AUSRD-part1 -> ../../sda1

# Vemos que sale

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-name-diskedt-dades -> ../../dm-1
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-name-diskedt-sistema -> ../../dm-0


‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-uuid-LVM-z3Upz9EN424JDCdcse2W2qVOkdrr4D6LKamHDKLQGCg0B8VZ3avxd8sYkZnBc6Oc -> ../../dm-0
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-uuid-LVM-z3Upz9EN424JDCdcse2W2qVOkdrr4D6LZEEOn6uidryzQ3jZ8AYfsdORy2EitpXm -> ../../dm-1



‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-HK5Cgu-sp8y-aVWK-RAoL-G2Ok-xs5f-jbqGI3 -> ../../loop4
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k -> ../../loop2
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-SQmPdK-RXTc-s7Uk-fXM9-MuiP-ghw7-yQkrXz -> ../../loop3



## Hacemos un ls -l

root@i11:/opt/lvm# ls -l /dev/diskedt/


lrwxrwxrwx 1 root root 7 Feb  9 09:31 dades -> ../dm-1
lrwxrwxrwx 1 root root 7 Feb  9 09:30 sistema -> ../dm-0
```

########################

### APUNTES DE LVDISPLAY

  Segments = 1 [COGE EL ESPACIO NECESARIO de una PV] --> El sistema redirige en uno, mientras que DADES redirige en 2 VOLUMENES L√ìGICOS.

        SISTEMA = SEGMENT 1 (1 DISCO PV)

        DADES = SEGMENT 2 (2 DISCOS PV)



##############################

#### FORMATO

* La **cantidad de PE** que utiliza cada **Logical Volume**, **sistema** utiliza **13** de **4MB** que proporciona **52MB** de almacenamiento, todos ellos en un mismo segmento (*Physical Volume*).

* En cambio **dades** *utiliza 35 unidades de asignaci√≥n PE de 4MB, proporcionando 140MB de almacenamiento y ocupa 2 segmentos*. 

       * Es decir 2 **Vol√∫menes F√çSICOS.**.


### Formateo de ext4 a /dev/diskedt/dades y /dev/diskedt/sistema

```

### SISTEMA

root@i11:/opt/lvm# mkfs -t ext4 /dev/diskedt/dades

mke2fs 1.46.2 (28-Feb-2021)
Discarding device blocks: done                            
Creating filesystem with 143360 1k blocks and 35856 inodes
Filesystem UUID: 18b81e3e-49c5-419f-80ca-8c1b74130b60
Superblock backups stored on blocks: 
	8193, 24577, 40961, 57345, 73729

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done 

root@i11:/opt/lvm# 


### DADES


root@i11:/opt/lvm# mkfs -t ext4 /dev/diskedt/sistema
mke2fs 1.46.2 (28-Feb-2021)
Discarding device blocks: done                            
Creating filesystem with 53248 1k blocks and 13328 inodes
Filesystem UUID: 0ef8d932-4dfa-449d-9385-89f6fbc8e5fb
Superblock backups stored on blocks: 
	8193, 24577, 40961

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

root@i11:/opt/lvm# 



```

* Ahora solamente queda:

       1. Crear los puntos de montaje y montarlos.

       2. Copiar datos a cada directorio.

### MOUNT POINT

```
root@i11:/opt/lvm# mkdir /mnt/dades
root@i11:/opt/lvm# mkdir /mnt/sistema
root@i11:/opt/lvm# mount /dev/diskedt/dades /mnt/dades/
root@i11:/opt/lvm# mount /dev/diskedt/sistema /mnt/sistema/

```

###### COPIA TODA "LA CHICHA" EL SISTEMA A /MNT/SISTEMA
```
root@i11:/mnt/dades# sudo cp /bin/?? /mnt/sistema/
root@i11:/mnt/dades# 
```
* ?? son 2 car√°cteres

###### EL COMANDO DF -H es importante --> Mira el espacio que estamos utilizando.

```
root@i11:/mnt/dades# df -h
Filesystem                                                            Size  Used Avail Use% Mounted on
udev                                                                  7.8G     0  7.8G   0% /dev
tmpfs                                                                 1.6G  1.9M  1.6G   1% /run
/dev/nvme0n1p5                                                        183G   52G  122G  30% /
tmpfs                                                                 7.8G   41M  7.8G   1% /dev/shm
tmpfs                                                                 5.0M  4.0K  5.0M   1% /run/lock
/dev/loop1                                                            128K  128K     0 100% /snap/msnake/10
/dev/loop0                                                            100M  100M     0 100% /snap/core/11993
tmpfs                                                                 1.6G  128K  1.6G   1% /run/user/103033
gandhi.informatica.escoladeltreball.org:/users/inf/hisx2/isx36579183  931G  319G  612G  35% /home/users/i
```

###### EL COMANDO BLKID es importante

```
root@i11:/mnt/dades# blkid
/dev/nvme0n1p5: LABEL="DEBIAN_MATI" UUID="d9b75a7b-29ed-497b-8dbd-560d93b87373" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-05"
/dev/nvme0n1p6: LABEL="DEBIAN_TARDE" UUID="a711ebb9-d209-40ee-a619-17819cd2c616" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-06"
/dev/nvme0n1p7: UUID="c4c43f9c-8baa-4ea3-8f83-ea016f59fb0d" TYPE="swap" PARTUUID="2ece0663-07"
/dev/loop0: TYPE="squashfs"
/dev/loop1: TYPE="squashfs"
/dev/loop2: UUID="olw5eV-sMrV-gHw2-rwe3-7uI2-iKfV-1QFqx3" TYPE="LVM2_member"
/dev/loop3: UUID="mkqUA2-LnXe-8tNo-pcyX-2fWX-h9eN-Wh4ejd" TYPE="LVM2_member"
/dev/loop4: UUID="3e2SuA-x5WD-fc4n-4Wv2-ESSM-JX8l-Yfk5ag" TYPE="LVM2_member"
/dev/mapper/diskedt-sistema: UUID="a27381b3-a651-43c4-a28d-f55485b2c298" BLOCK_SIZE="1024" TYPE="ext4"
/dev/mapper/diskedt-dades: UUID="47519fc5-fb2d-4111-9b2e-1253b45df932" BLOCK_SIZE="1024" TYPE="ext4"
root@i11:/mnt/dades# 
```

###### LSBLK

```
root@i11:/mnt/dades# lsblk
NAME              MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
loop0               7:0    0  99.4M  1 loop /snap/core/11993
loop1               7:1    0    16K  1 loop /snap/msnake/10
loop2               7:2    0   100M  0 loop 
‚îú‚îÄdiskedt-sistema 254:0    0    52M  0 lvm  /mnt/sistema
‚îî‚îÄdiskedt-dades   254:1    0   140M  0 lvm  
loop3               7:3    0   100M  0 loop 
‚îî‚îÄdiskedt-dades   254:1    0   140M  0 lvm  
loop4               7:4    0   100M  0 loop 
nvme0n1           259:0    0 465.8G  0 disk 
‚îú‚îÄnvme0n1p1       259:1    0     1K  0 part 
‚îú‚îÄnvme0n1p5       259:2    0 186.3G  0 part /
‚îú‚îÄnvme0n1p6       259:3    0 186.3G  0 part 
‚îî‚îÄnvme0n1p7       259:4    0   4.7G  0 part 
root@i11:/mnt/dades# 

```

###### MOUNT -T EXT4 (Mira los del tipo ext4)


### COPY DATA ON IT

root@i11:/opt/lvm# cp -R /boot/* /mnt/dades

root@i11:/opt/lvm# cp /boot/* /mnt/sistema/

cp: error writing '/mnt/sistema/vmlinuz-5.10.0-8-amd64': No space left on device



```
# USAMOS DF PARA REPORTAR EL ESPACIO DE DISCO USADO.

root@i11:/opt/lvm# df -h
Filesystem                                                            Size  Used Avail Use% Mounted on
udev                                                                  7.8G     0  7.8G   0% /dev
tmpfs                                                                 1.6G  1.9M  1.6G   1% /run
/dev/nvme0n1p5                                                        183G   52G  122G  30% /
tmpfs                                                                 7.8G   52M  7.8G   1% /dev/shm
tmpfs                                                                 5.0M  4.0K  5.0M   1% /run/lock
/dev/loop0                                                            100M  100M     0 100% /snap/core/11993
/dev/loop1                                                            128K  128K     0 100% /snap/msnake/10
tmpfs                                                                 1.6G  916K  1.6G   1% /run/user/103033
gandhi.informatica.escoladeltreball.org:/users/inf/hisx2/isx36579183  931G  319G  613G  35% /home/users/inf/hisx2/isx36579183/isx36579183
/dev/sda1                                                             932G  501G  432G  54% /media/isx36579183/ChaseKiD03 My Passport
/dev/mapper/diskedt-dades                                             131M   61M   60M  51% /mnt/dades
/dev/mapper/diskedt-sistema                                            46M   45M     0 100% /mnt/sistema
root@i11:/opt/lvm# 


```




```

## CON LA ORDEN BLKID VEMOS BLOCK DEVICE ATTRIBUTES.

root@i11:/opt/lvm# blkid


/dev/nvme0n1p5: LABEL="DEBIAN_MATI" UUID="d9b75a7b-29ed-497b-8dbd-560d93b87373" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-05"
/dev/nvme0n1p6: LABEL="DEBIAN_TARDE" UUID="a711ebb9-d209-40ee-a619-17819cd2c616" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-06"
/dev/nvme0n1p7: UUID="c4c43f9c-8baa-4ea3-8f83-ea016f59fb0d" TYPE="swap" PARTUUID="2ece0663-07"
/dev/loop0: TYPE="squashfs"
/dev/loop1: TYPE="squashfs"
/dev/loop2: UUID="lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k" TYPE="LVM2_member"
/dev/loop3: UUID="SQmPdK-RXTc-s7Uk-fXM9-MuiP-ghw7-yQkrXz" TYPE="LVM2_member"
/dev/loop4: UUID="HK5Cgu-sp8y-aVWK-RAoL-G2Ok-xs5f-jbqGI3" TYPE="LVM2_member"
/dev/sda1: LABEL="ChaseKiD03 My Passport" BLOCK_SIZE="512" UUID="4E1AEA7B1AEA6007" TYPE="ntfs" PARTUUID="ba3b8294-01"
/dev/mapper/diskedt-sistema: UUID="0ef8d932-4dfa-449d-9385-89f6fbc8e5fb" BLOCK_SIZE="1024" TYPE="ext4"
/dev/mapper/diskedt-dades: UUID="18b81e3e-49c5-419f-80ca-8c1b74130b60" BLOCK_SIZE="1024" TYPE="ext4"
root@i11:/opt/lvm# 


```



###### MODIFICACIONS EN CALENT

* Seg√∫n el ESQUEMA, haremos una modificaci√≥n en CALIENTE. 

[VEASE_ESQUEMA_LIBRETA]

* vgextend diskedt /dev/loop3 /dev/loop2 /dev/loop4

* sudo lvextend -L +30M /dev/diskedt/dades

```
root@i11:/mnt/dades# sudo lvextend -L +30M /dev/diskedt/dades
  Rounding size to boundary between physical extents: 32.00 MiB.
  Size of logical volume diskedt/dades changed from 140.00 MiB (35 extents) to 172.00 MiB (43 extents).
  Logical volume diskedt/dades successfully resized.
root@i11:/mnt/dades# 


```

* df -h

```
root@i11:/mnt/dades# df -h
Filesystem                                                            Size  Used Avail Use% Mounted on
udev                                                                  7.8G     0  7.8G   0% /dev
tmpfs                                                                 1.6G  1.9M  1.6G   1% /run
/dev/nvme0n1p5                                                        183G   52G  122G  30% /
tmpfs                                                                 7.8G   39M  7.8G   1% /dev/shm
tmpfs                                                                 5.0M  4.0K  5.0M   1% /run/lock
/dev/loop1                                                            128K  128K     0 100% /snap/msnake/10
/dev/loop0                                                            100M  100M     0 100% /snap/core/11993
tmpfs                                                                 1.6G  128K  1.6G   1% /run/user/103033
gandhi.informatica.escoladeltreball.org:/users/inf/hisx2/isx36579183  931G  319G  612G  35% /home/users/inf/hisx2/isx36579183/isx36579183
/dev/mapper/diskedt-sistema                                            46M   15M   28M  35% /mnt/sistema
root@i11:/mnt/dades# 



```

* sudo resize2fs /dev/diskedt/dades (Resize del SISTEMA del SISTEMA DE PARTICIONES)

```
root@i11:/mnt/dades# resize2fs /dev/diskedt/dades
resize2fs 1.46.2 (28-Feb-2021)
Resizing the filesystem on /dev/diskedt/dades to 176128 (1k) blocks.
The filesystem on /dev/diskedt/dades is now 176128 (1k) blocks long.

root@i11:/mnt/dades# 


```

    * Se puede hacer en **[CALIENTE]**.

* df -h

```
root@i11:/mnt/dades# df -h
Filesystem                                                            Size  Used Avail Use% Mounted on
udev                                                                  7.8G     0  7.8G   0% /dev
tmpfs                                                                 1.6G  1.9M  1.6G   1% /run
/dev/nvme0n1p5                                                        183G   52G  122G  30% /
tmpfs                                                                 7.8G   39M  7.8G   1% /dev/shm
tmpfs                                                                 5.0M  4.0K  5.0M   1% /run/lock
/dev/loop1                                                            128K  128K     0 100% /snap/msnake/10
/dev/loop0                                                            100M  100M     0 100% /snap/core/11993
tmpfs                                                                 1.6G  128K  1.6G   1% /run/user/103033
gandhi.informatica.escoladeltreball.org:/users/inf/hisx2/isx36579183  931G  319G  612G  35% /home/users/inf/hisx2/isx36579183/isx36579183
/dev/mapper/diskedt-sistema                                            46M   15M   28M  35% /mnt/sistema
root@i11:/mnt/dades# 



```

* lvcreate -L 60M -n services /dev/diskedt --> Creamos una partici√≥n l√≥gica

```
root@i11:/mnt/dades# lvcreate -L 60M -n services /dev/diskedt
  Logical volume "services" created.
root@i11:/mnt/dades# 
```

* lvdisplay

```
  --- Logical volume ---
  LV Path                /dev/diskedt/services
  LV Name                services
  VG Name                diskedt
  LV UUID                1nxaZ2-EVC0-XZKS-RYGz-KdO4-kOcP-hKcVaZ
  LV Write Access        read/write
  LV Creation host, time i11, 2022-02-10 12:53:16 +0100
  LV Status              available
  # open                 0
  LV Size                60.00 MiB
  Current LE             15
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:2
   
root@i11:/mnt/dades# 



```

* resize2fs /dev/diskedt/sistema 30M (Redimensiona el SISTEMA DE FICHEROS EXT4 de /dev/diskedt/sistema a 30M)

* e2fsck -f /dev/diskedt/sistema


    **M√ÅS GRANDE**

    1. Hacer m√°s grande la CARPETA (LA PARTICI√ìN) (LVEXTEND) y luego los DATOS (RESIZE2FS).

    **M√ÅS PEQUE√ëO**

    1. Esborrar cosas de la DATOS (RESIZE2FS) y luego hacer m√°s peque√±o la CARPETA (LVREDUCE).

* 

* 

* lvreduce -L 30M /dev/diskedt/sistema

* lvreduce -L 32M /dev/diskedt/sistema --> YES / This May...

* mount /dev/diskedt/sistema /mnt/sistema

* ls /mnt/sistema

* df -h

* blkid

* lsblk

* vgdisplay 

##### SIGUIENTE EJERCICIO


1. dd if=/dev/zero of=disk04.img bs=1k count=500k

2. losetup /dev/loop5

3. pvcreate /dev/loop5


```
root@i11:/mnt/dades# cd /opt/lvm
root@i11:/opt/lvm# ls -l
total 228336
-rw-r--r-- 1 root root 104857600 Feb  9 12:04 disk01.img
-rw-r--r-- 1 root root 104857600 Feb  9 12:04 disk02.img
-rw-r--r-- 1 root root 104857600 Feb  9 09:03 disk03.img
drwxr-xr-x 2 root root      4096 Feb 10 12:22 repaso
root@i11:/opt/lvm# dd if=/dev/zero of=disk04.img bs=1k count=500k
512000+0 records in
512000+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 0.529212 s, 991 MB/s
root@i11:/opt/lvm# losetup /dev/loop5
losetup: /dev/loop5: No such file or directory
root@i11:/opt/lvm# losetup /dev/loop5 disk04.img 
root@i11:/opt/lvm# losetup -a
/dev/loop1: [66306]:4333635 (/var/lib/snapd/snaps/msnake_10.snap)
/dev/loop4: [66306]:5245312 (/opt/lvm/repaso/disk03.img)
/dev/loop2: [66306]:5245310 (/opt/lvm/repaso/disk01.img)
/dev/loop0: [66306]:4333633 (/var/lib/snapd/snaps/core_11993.snap)
/dev/loop5: [66306]:5245313 (/opt/lvm/disk04.img)
/dev/loop3: [66306]:5245311 (/opt/lvm/repaso/disk02.img)
root@i11:/opt/lvm# pvcreate /dev/loop5
  Physical volume "/dev/loop5" successfully created.
root@i11:/opt/lvm# 

```


4. vgextend diskedt /dev/loop5 --> Lo a√±ade a un GRUPO EXTENDIDO.

```
root@i11:/opt/lvm# vgextend diskedt /dev/loop5
  Volume group "diskedt" successfully extended
root@i11:/opt/lvm# 


```

5. vgdisplay
```
root@i11:/opt/lvm# vgdisplay
  --- Volume group ---
  VG Name               diskedt
  System ID             
  Format                lvm2
  Metadata Areas        4
  Metadata Sequence No  7
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                3
  Open LV               1
  Max PV                0
  Cur PV                4
  Act PV                4
  VG Size               784.00 MiB
  PE Size               4.00 MiB
  Total PE              196
  Alloc PE / Size       71 / 284.00 MiB
  Free  PE / Size       125 / 500.00 MiB
  VG UUID               w9D5xX-1U22-60sW-qWeN-WNEE-RolO-21hej9
   
root@i11:/opt/lvm# 

```
    * Tenemos 4 DISCOS PV

6. journalctl -f > /mnt/sistema

7. lvdisplay /dev/diskedt/sistema

8. pvdisplay /dev/loop2



9. pvmove /dev/loop2 (IMPORTANTE MOVER ANTES DE hacer un VGREDUCE)

    * pvmove MUEVE el PV


```
root@i11:/opt/lvm# pvmove /dev/loop2
  /dev/loop2: Moved: 29.17%
  /dev/loop2: Moved: 54.17%
  /dev/loop2: Moved: 100.00%

```
9.1 Hacer un vgremove diskedt /dev/loop2


9.1 pvmove /dev/loop3
```
root@i11:/opt/lvm# pvmove /dev/loop3
  /dev/loop3: Moved: 16.67%
  /dev/loop3: Moved: 100.00%
```

9.2 pvmove /dev/loop4
```
root@i11:/opt/lvm# pvmove /dev/loop4
  /dev/loop4: Moved: 21.74%
  /dev/loop4: Moved: 34.78%
  /dev/loop4: Moved: 100.00%
root@i11:/opt/lvm# 

```

10. PARA BORRAR (No hace desmontar nada) --> 

                                1. Desvincular primero. 
                                
                                    (VGREMOVE) --> Borra el GRUPO

                                    (VGREDUCE) --> Borra alguno de los PV --> vgreduce diskedt /dev/loop2 (No hace falta desmontar)

                                2. Borrar el PV

                                    * pvremove /dev/loop2 (Sino no te dejar√°)

* 

* Borrar la marca de los DISCOS --> pvremove.

pvremove /dev/loop2 /dev/loop3


[REHACER_PRACTICA]

* TEORIA Y PR√ÅCTICA

* EJEMPLOS

    1. Crear nuevos DISCOS

    2. Redimensionar DISCOS en CALIENTE.

        GRANDE

        PEQUE√ëO

    3. Montar DISCOS.

    4. 


### LVMRAID





* lvextend -L +100M -r /dev/diskedt/dades

* df -h






























-------------------


* apropos lvm [Busca el MAN de LVM]

```
lvm (8)              - LVM2 tools
lvm-config (8)       - Display and manipulate configuration information
lvm-dumpconfig (8)   - Display and manipulate configuration information
lvm-fullreport (8)   - (unknown subject)
lvm-lvpoll (8)       - (unknown subject)
lvm.conf (5)         - Configuration file for LVM2
lvm2-activation-generator (8) - generator for systemd units to activate LVM volumes on boot
lvmcache (7)         - LVM caching
lvmconfig (8)        - Display and manipulate configuration information
lvmdiskscan (8)      - List devices that may be used as physical volumes
lvmdump (8)          - create lvm2 information dumps for diagnostic purposes
lvmpolld (8)         - LVM poll daemon
lvmraid (7)          - LVM RAID
lvmreport (7)        - LVM reporting and related features
lvmsadc (8)          - LVM system activity data collector
lvmsar (8)           - LVM system activity reporter
lvmsystemid (7)      - LVM system ID
lvmthin (7)          - LVM thin provisioning
lvmvdo (7)           - Support for Virtual Data Optimizer in LVM
pvcreate (8)         - Initialize physical volume(s) for use by LVM
pvremove (8)         - Remove LVM label(s) from physical volume(s)
```

* Ordres de gesti√≥ de Volums L√≤gics:

* pv [TAB]

```
       pvchange      Change attributes of a Physical Volume.
       pvck          Check Physical Volume metadata.
       pvcreate      Initialize a disk or partition for use by LVM.
       pvdisplay     Display attributes of a Physical Volume.
       pvmove        Move Physical Extents.
       pvremove      Remove a Physical Volume.
       pvresize      Resize a disk or partition in use by LVM2.
       pvs           Report information about Physical Volumes.
       pvscan        Scan all disks for Physical Volumes.

```

* vg [TAB]

```
       vgcfgbackup   Backup Volume Group descriptor area.
       vgcfgrestore  Restore Volume Group descriptor area.
       vgchange      Change attributes of a Volume Group.
       vgck          Check Volume Group metadata.
       vgconvert     Convert Volume Group metadata format.
       vgcreate      Create a Volume Group.
       vgdisplay     Display attributes of Volume Groups.
       vgexport      Make volume Groups unknown to the system.
       vgextend      Add Physical Volumes to a Volume Group.
       vgimport      Make exported Volume Groups known to the system.
       vgimportclone Import and rename duplicated Volume Group (e.g. a hardware snapshot).
       vgmerge       Merge two Volume Groups.
       vgmknodes     Recreate Volume Group directory and Logical Volume special files
       vgreduce      Reduce a Volume Group by removing one or more Physical Volumes.
       vgremove      Remove a Volume Group.
       vgrename      Rename a Volume Group.
       vgs           Report information about Volume Groups.
       vgscan        Scan all disks for Volume Groups.
       vgsplit       Split  a  Volume Group into two, moving any logical volumes from one Volume Group
                     to another by moving entire Physical Volumes.

```

* lv [TAB]

```
       lvchange      Change attributes of a Logical Volume.
       lvconvert     Convert a Logical Volume from linear to mirror or snapshot.
       lvcreate      Create a Logical Volume in an existing Volume Group.
       lvdisplay     Display attributes of a Logical Volume.
       lvextend      Extend the size of a Logical Volume.
       lvmconfig     Display the configuration information after loading  lvm.conf(5)  and  any  other
                     configuration files.
       lvmdiskscan   Scan for all devices visible to LVM2.
       lvmdump       Create lvm2 information dumps for diagnostic purposes.
       lvreduce      Reduce the size of a Logical Volume.
       lvremove      Remove a Logical Volume.
       lvrename      Rename a Logical Volume.
       lvresize      Resize a Logical Volume.
       lvs           Report information about Logical Volumes.
       lvscan        Scan (all disks) for Logical Volumes.

```


# LOGICAL VOLUME MANAGER

* Las particiones LVM tienen **ciertas ventajas** sobre las particiones est√°ndares.

* LVM son formateados como **Vol√∫menes f√≠sicos**.

* 1 o m√°s **LVM** son combinados en **Grupos de Volumen**.

       * Cada **almacenamiento grupal** est√° dividido en uno o m√°s **vol√∫menes l√≥gicos**.

              * Los **vol√∫menes l√≥gicos** son como **particiones est√°ndar**.

                     * Tienen el FILESYSTEM, ext4 y el mountpoint.


### Resumen: 

* LVM son una pila de bloques.

       * Un bloque es un almacenamiento que se usa para almacenar datos.

       * Los bloques pueden ser agrupados en un grupo (stack).

              * Los discos f√≠sicos son combinados en un *volumen grupal*.

              * El stack resultante, puede subdividirse en varios **vol√∫menes de tama√±o variable.**.


* Un administrador puede hacer crecer o decrecer los **vol√∫menes l√≥gicos** sin tener que **destruir datos**, en lugar de **standard partitions**. En caliente.




#### EJERCICIO PR√ÅCTICO 1: LVM

* Se crean **tres unidades f√≠sicas imaginarias** usando **dd** para generar espacio de disco virtual.

* Se asignan ficheros a un **dispositivo** de disco f√≠sico de **loopback**. 

* Se crean **3 particiones** **/dev/loop0**, **/dev/loop1**, **/dev/loop2**.

1. Crear los 3 **ficheros de imagen**

## DD (Conver and COPY a FILE) --> /dev/zero (Imaginario)

```
# dd if=/dev/zero of=disk01.img bs=1k count=100K
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.149352 s, 702 MB/s


# dd if=/dev/zero of=disk02.img bs=1k count=100K
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.144737 s, 724 MB/s


# dd if=/dev/zero of=disk03.img bs=1k count=100K
102400+0 records in
102400+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.146417 s, 716 MB/s
 

# Se crea una carpeta en /opt 

# mkdir lvm

# Se los asigna al LOOPBACK como ROOT (Se empieza del 2 al 4)

## ¬°¬° YA EST√Å OCUPADO !!
root@i11:/opt/lvm# losetup /dev/loop0 disk01.img 
losetup: disk01.img: failed to set up loop device: Device or resource busy


# root@i11:/opt/lvm# losetup /dev/loop2 disk01.img 
root@i11:/opt/lvm# losetup /dev/loop3 disk02.img 
root@i11:/opt/lvm# losetup /dev/loop4 disk03.img 


# Verificamos

root@i11:/opt/lvm# losetup -a
/dev/loop1: [66306]:4333635 (/var/lib/snapd/snaps/msnake_10.snap)
/dev/loop4: [66306]:5245294 (/opt/lvm/disk03.img)
/dev/loop2: [66306]:5245283 (/opt/lvm/disk01.img)
/dev/loop0: [66306]:4333633 (/var/lib/snapd/snaps/core_11993.snap)
/dev/loop3: [66306]:5245290 (/opt/lvm/disk02.img)

```

#### PV (PHYSICAL VOLUMES) --> Crea vol√∫menes f√≠sicos.

2. Disponemos de **3 trozos** de almacenamiento para crear un **volumen f√≠sico** para cada uno de ellos.

       * Es decir, adaptados para ser utilizados como almacenamientl LVM.

       * Primero se realiza el **Physical Volume**.

```
root@i11:/opt/lvm# pvcreate /dev/loop2 /dev/loop3 /dev/loop4

  Physical volume "/dev/loop2" successfully created.
  Physical volume "/dev/loop3" successfully created.
  Physical volume "/dev/loop4" successfully created.
root@i11:/opt/lvm# 


root@i11:/opt/lvm# pvdisplay /dev/loop2
  "/dev/loop2" is a new physical volume of "100.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/loop2
  VG Name               
  PV Size               100.00 MiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k
   
root@i11:/opt/lvm# 

## Con la orden pvdisplay, observamos a fondo el volumen f√≠sico.


```

#### VG (VOLUME GROUPS) --> Agrupa vol√∫menes f√≠sicos.

* Los espacios de almacenamiento **LVM**, se agrupan en **UNIDADES DE ALMACENAMIENTO GRUPALES** llamados **VOLUME GROUPS**.

* El VOLUME GROUP a que crearemos se llamar√° **diskedt**.

```
# Creamos el VOLUME GROUP

root@i11:/opt/lvm# vgcreate diskedt /dev/loop2 /dev/loop3
  Volume group "diskedt" successfully created

# Visualizamos el VOLUMEGROUP

root@i11:/opt/lvm# vgdisplay diskedt
  --- Volume group ---
  VG Name               diskedt
  System ID             
  Format                lvm2
  Metadata Areas        2
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                2
  Act PV                2
  VG Size               192.00 MiB
  PE Size               4.00 MiB
  Total PE              48
  Alloc PE / Size       0 / 0   
  Free  PE / Size       48 / 192.00 MiB
  VG UUID               z3Upz9-EN42-4JDC-dcse-2W2q-VOkd-rr4D6L

```

* Los espacios de **100M** de **loop2** y **loop3** se juntan para crear un **dispositivo f√≠sico de 200M** llamado **/dev/diskedt** (No aparece hasta particionarlo) (Aprox de 192M).

       * Se pierde espacio de almacenamiento debido a crear estructuras para la gesti√≥n LVM.

* Observamos el antes y despu√©s de asignar **PHYSICAL VOLUMES** al **VOLUME GROUP**

```
# ANTES

root@i11:/opt/lvm# pvdisplay /dev/loop2
  --- Physical volume ---
  PV Name               /dev/loop2
  VG Name               diskedt
  PV Size               100.00 MiB / not usable 4.00 MiB
  Allocatable           yes 
  PE Size               4.00 MiB
  Total PE              24
  Free PE               24
  Allocated PE          0
  PV UUID               lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k
   
# DESPUES

root@i11:/opt/lvm# pvdisplay /dev/loop2
  "/dev/loop2" is a new physical volume of "100.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/loop2
  VG Name               
  PV Size               100.00 MiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k

```

#### LV (LOGICAL VOLUME) --> Crea vol√∫menes l√≥gicos.

* Cuando ya tengamos los **VOLUME GROUP** podemos hacer particiones llamadas **Logical Volume**.

       * Creamos **2 particiones**: **50M** llamado **sistema** y **150M** llamado **dades**.

```

root@i11:/opt/lvm# lvcreate -L 50M -n sistema /dev/diskedt
  Rounding up size to full physical extent 52.00 MiB
  Logical volume "sistema" created.


# Da error en la segunda

root@i11:/opt/lvm# lvcreate -L 150M -n dades /dev/diskedt
  Rounding up size to full physical extent 152.00 MiB
  Volume group "diskedt" has insufficient free space (35 extents): 38 required.
root@i11:/opt/lvm# 

## Para SOLUCIONARLO:

root@i11:/opt/lvm# lvcreate -l100%FREE -n dades /dev/diskedt
  Logical volume "dades" created.



## MOSTRAMOS


root@i11:/opt/lvm# lvdisplay
  --- Logical volume ---
  LV Path                /dev/diskedt/sistema
  LV Name                sistema
  VG Name                diskedt
  LV UUID                KamHDK-LQGC-g0B8-VZ3a-vxd8-sYkZ-nBc6Oc
  LV Write Access        read/write
  LV Creation host, time i11, 2022-02-09 09:30:35 +0100
  LV Status              available
  # open                 0
  LV Size                52.00 MiB
  Current LE             13
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:0
   
  --- Logical volume ---
  LV Path                /dev/diskedt/dades
  LV Name                dades
  VG Name                diskedt
  LV UUID                ZEEOn6-uidr-yzQ3-jZ8A-Yfsd-ORy2-EitpXm
  LV Write Access        read/write
  LV Creation host, time i11, 2022-02-09 09:31:56 +0100
  LV Status              available
  # open                 0
  LV Size                140.00 MiB
  Current LE             35
  Segments               2
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:1
   
root@i11:/opt/lvm# 




# Hacemos un TREE

root@i11:/opt/lvm# tree /dev/disk
/dev/disk
‚îú‚îÄ‚îÄ by-id
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ata-WDC_WD10JMVW-59AJGS3_WD-WXJ1E65AUSRD -> ../../sda
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ata-WDC_WD10JMVW-59AJGS3_WD-WXJ1E65AUSRD-part1 -> ../../sda1

# Vemos que sale

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-name-diskedt-dades -> ../../dm-1
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-name-diskedt-sistema -> ../../dm-0


‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-uuid-LVM-z3Upz9EN424JDCdcse2W2qVOkdrr4D6LKamHDKLQGCg0B8VZ3avxd8sYkZnBc6Oc -> ../../dm-0
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ dm-uuid-LVM-z3Upz9EN424JDCdcse2W2qVOkdrr4D6LZEEOn6uidryzQ3jZ8AYfsdORy2EitpXm -> ../../dm-1



‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-HK5Cgu-sp8y-aVWK-RAoL-G2Ok-xs5f-jbqGI3 -> ../../loop4
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k -> ../../loop2
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ lvm-pv-uuid-SQmPdK-RXTc-s7Uk-fXM9-MuiP-ghw7-yQkrXz -> ../../loop3



## Hacemos un ls -l

root@i11:/opt/lvm# ls -l /dev/diskedt/


lrwxrwxrwx 1 root root 7 Feb  9 09:31 dades -> ../dm-1
lrwxrwxrwx 1 root root 7 Feb  9 09:30 sistema -> ../dm-0




```


#### FORMATO

* La **cantidad de PE** que utiliza cada **Logical Volume**, **sistema** utiliza **13** de **4MB** que proporciona **52MB** de almacenamiento, todos ellos en un mismo segmento (*Physical Volume*).

* En cambio **dades** *utiliza 35 unidades de asignaci√≥n PE de 4MB, proporcionando 140MB de almacenamiento y ocupa 2 segmentos*. 

       * Es decir 2 **Vol√∫menes F√çSICOS.**.


### Formateo de ext4 a /dev/diskedt/dades y /dev/diskedt/sistema

```

### SISTEMA

root@i11:/opt/lvm# mkfs -t ext4 /dev/diskedt/dades

mke2fs 1.46.2 (28-Feb-2021)
Discarding device blocks: done                            
Creating filesystem with 143360 1k blocks and 35856 inodes
Filesystem UUID: 18b81e3e-49c5-419f-80ca-8c1b74130b60
Superblock backups stored on blocks: 
	8193, 24577, 40961, 57345, 73729

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done 

root@i11:/opt/lvm# 


### DADES


root@i11:/opt/lvm# mkfs -t ext4 /dev/diskedt/sistema
mke2fs 1.46.2 (28-Feb-2021)
Discarding device blocks: done                            
Creating filesystem with 53248 1k blocks and 13328 inodes
Filesystem UUID: 0ef8d932-4dfa-449d-9385-89f6fbc8e5fb
Superblock backups stored on blocks: 
	8193, 24577, 40961

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

root@i11:/opt/lvm# 



```

* Ahora solamente queda:

       1. Crear los puntos de montaje y montarlos.

       2. Copiar datos a cada directorio.

### MOUNT POINT

```
root@i11:/opt/lvm# mkdir /mnt/dades
root@i11:/opt/lvm# mkdir /mnt/sistema
root@i11:/opt/lvm# mount /dev/diskedt/dades /mnt/dades/
root@i11:/opt/lvm# mount /dev/diskedt/sistema /mnt/sistema/

```


### COPY DATA ON IT

root@i11:/opt/lvm# cp -R /boot/* /mnt/dades

root@i11:/opt/lvm# cp /boot/* /mnt/sistema/

cp: error writing '/mnt/sistema/vmlinuz-5.10.0-8-amd64': No space left on device



```
# USAMOS DF PARA REPORTAR EL ESPACIO DE DISCO USADO.

root@i11:/opt/lvm# df -h
Filesystem                                                            Size  Used Avail Use% Mounted on
udev                                                                  7.8G     0  7.8G   0% /dev
tmpfs                                                                 1.6G  1.9M  1.6G   1% /run
/dev/nvme0n1p5                                                        183G   52G  122G  30% /
tmpfs                                                                 7.8G   52M  7.8G   1% /dev/shm
tmpfs                                                                 5.0M  4.0K  5.0M   1% /run/lock
/dev/loop0                                                            100M  100M     0 100% /snap/core/11993
/dev/loop1                                                            128K  128K     0 100% /snap/msnake/10
tmpfs                                                                 1.6G  916K  1.6G   1% /run/user/103033
gandhi.informatica.escoladeltreball.org:/users/inf/hisx2/isx36579183  931G  319G  613G  35% /home/users/inf/hisx2/isx36579183/isx36579183
/dev/sda1                                                             932G  501G  432G  54% /media/isx36579183/ChaseKiD03 My Passport
/dev/mapper/diskedt-dades                                             131M   61M   60M  51% /mnt/dades
/dev/mapper/diskedt-sistema                                            46M   45M     0 100% /mnt/sistema
root@i11:/opt/lvm# 


```




```

## CON LA ORDEN BLKID VEMOS BLOCK DEVICE ATTRIBUTES.

root@i11:/opt/lvm# blkid


/dev/nvme0n1p5: LABEL="DEBIAN_MATI" UUID="d9b75a7b-29ed-497b-8dbd-560d93b87373" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-05"
/dev/nvme0n1p6: LABEL="DEBIAN_TARDE" UUID="a711ebb9-d209-40ee-a619-17819cd2c616" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ece0663-06"
/dev/nvme0n1p7: UUID="c4c43f9c-8baa-4ea3-8f83-ea016f59fb0d" TYPE="swap" PARTUUID="2ece0663-07"
/dev/loop0: TYPE="squashfs"
/dev/loop1: TYPE="squashfs"
/dev/loop2: UUID="lCiF9w-V0Wh-2xC8-u04t-cHCT-zaQw-AlCP8k" TYPE="LVM2_member"
/dev/loop3: UUID="SQmPdK-RXTc-s7Uk-fXM9-MuiP-ghw7-yQkrXz" TYPE="LVM2_member"
/dev/loop4: UUID="HK5Cgu-sp8y-aVWK-RAoL-G2Ok-xs5f-jbqGI3" TYPE="LVM2_member"
/dev/sda1: LABEL="ChaseKiD03 My Passport" BLOCK_SIZE="512" UUID="4E1AEA7B1AEA6007" TYPE="ntfs" PARTUUID="ba3b8294-01"
/dev/mapper/diskedt-sistema: UUID="0ef8d932-4dfa-449d-9385-89f6fbc8e5fb" BLOCK_SIZE="1024" TYPE="ext4"
/dev/mapper/diskedt-dades: UUID="18b81e3e-49c5-419f-80ca-8c1b74130b60" BLOCK_SIZE="1024" TYPE="ext4"
root@i11:/opt/lvm# 


```






## RAID

## Backups

## Certificats GPG --> 

## Filesystem Crypt --> Partici√≥ encriptada

















-------------------------------------------------------------------------------- 

# UF2 - DATA IN MOTION/(In transit) --> Com li posem seguretat quan es mogui.

##	Capa de Seguretat del KERBEROS (Third-party-authentication) / Seguretat en Xarxa. (Capa de Kerberos) 

* Kerberos

* Tunels SSH

* Tunels VPN

* OpenSSL --> Criptograf√≠a sim√©trica y asim√©trica. Gestionar certificados.

# UF3 IPTABLES Y FIREWALLS

* Iptables (Conceptos de firewalls, DMZ, filtrar cadenas de trabajo).

* Firewalld (Alto nivel)















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 



















-------------------------------------------------------------------------------- 
