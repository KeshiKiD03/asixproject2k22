# __Projecte ASIX 2k22__
## __Escola Del Treball__
### __2HISX 2021-2022__
### __Aaron Andal & Cristian Condolo__


<br>
<br>
<br>
<br>

# __CryptoSEC__: "_Careful where you step in_"


![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/CryptoSECLogo.png?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*



<br>
<br>
<br>




# __Index__

+ **Atac Man in The Middle**: [--> readME <--](#atac-man-in-the-middle)

+ **Com prevenir atacs Man in The Middle?**: [--> readME <--](#com-prevenir-atacs-man-in-the-middle)

    + **1. S/MIME**: [--> readME <--](#1-smime)

    + **2. Certificats d'autenticació / OpenSSL**: [--> readME <--](#2-certificats-dautenticació--openssl)

    + **3. Evitar les xarxes públiques i obertes**: [--> readME <--](#3-evitar-les-xarxes-públiques-i-obertes)

    + **4. Utilitzar eines per navegar a HTTPS**: [--> readME <--](#4-utilitzar-eines-per-navegar-a-https)

    + **5. Utilitzar serveis VPN**: [--> readME <--](#5-utilitzar-serveis-vpn)

    + **6. Protegir la integritat dels nostres comptes d'usuari**: [--> readME <--](#6-protegir-la-integritat-dels-nostres-comptes-dusuari)

    + **7. Compte amb els correus electrònics**: [--> readME <--](#7-compte-amb-els-correus-electrònics)

    + **8. Mantenir els sistemes actualitzats**: [--> readME <--](#8-mantenir-els-sistemes-actualitzats)

+ **Exemple MITM (_Eavesdropping_)**: [--> readME <--](#exemple-mitm-eavesdropping)

    + **MITM - Eavesdropping (Sniffing) (BETTERCAP)**: [--> readME <--](#mitm---eavesdropping-sniffing-bettercap)

+ **Bibliografia**: [--> readME <--](#bibliografia)

<br>
<br>
<br>

# __Atac Man in The Middle__

Un atac MITM passa quan una comunicació entre __dos sistemes__ és __interceptada__ per una __entitat externa__. 

Això pot passar en qualsevol forma de comunicació __en línia__, com ara __correu electrònic__, __xarxes socials__, __navegació web__, etc. 

No només estan tractant __d'escoltar__ les nostres converses privades, sinó que també poden __dirigir__ tota la __informació__ dins dels __dispositius__.

Treient tots els detalls tècnics, el concepte d'un atac MITM es pot descriure en un escenari simple. Si imaginem que tornem als temps antics quan el correu de cargol abundava. 

Jerry escriu una carta a Jackie en què li expressa el seu amor després d'anys d'amagar els seus sentiments. Ell envia la carta a l'oficina de correus i és recollit per un carter ficat. 

L'obre i, per pur gust, decideix reescriure la carta abans de lliurar el correu a Jackie. Això pot fer que Jackie odiï Jerry per la resta de la seva vida.

Un exemple més modern seria un hacker entre nosaltres (i el nostre navegador) i el lloc web que esteu visitant per interceptar i capturar qualsevol informació que enviem al lloc, com credencials d'inici de sessió o informació financera.

![](https://wallstreetinv.com/wp-content/uploads/2021/03/how-man-in-middle-works-min.png)
> __Img Source__: *https://wallstreetinv.com/wp-content/uploads/2021/03/how-man-in-middle-works-min.png*

<br>
<br>
<br>

# __Com prevenir atacs Man in The Middle?__

Els atacs de MITM realment poden __"incomodar"__ simplement en escoltar el seu concepte bàsic, però això no vol dir que siguin impossibles d'evitar. 

La tecnologia __PKI__ us pot ajudar a protegir-vos d'alguns dels tipus d'atacs que discutim anteriorment.

<br>

## __1. S/MIME__

Extensions de correu d'Internet segures/multipropòsit, o S/MIME abreuja, encripta els correus electrònics en repòs o en trànsit, assegurant que només els destinataris puguin llegir-los i sense deixar marge perquè els pirates informàtics s'introdueixin i alterin els nostres missatges. 

A més, S/MIME permet signar digitalment els correu electrònic amb un Certificat digital únic per a cada persona. 

Això vincula la identitat virtual al nostre correu electrònic i brinda als destinataris la garantia que el correu electrònic que van rebre realment prové de nosaltres (a diferència d'un hacker que accedeix al nostre servidor de correu). 

Si bé els pirates informàtics poguessin tenir accés als servidors de correu de les empreses per signar digitalment els missatges, també necessitarien accedir a les claus privades dels empleats, que generalment s'emmagatzemen de manera segura en un altre lloc. 

Estandarditzar la signatura digital de missatges i educar els destinataris perquè només confiï en els missatges de l'empresa que s'han signat pot ajudar a diferenciar els correus electrònics legítims dels falsificats.

![](https://www.zohowebstatic.com/sites/default/files/u1590/050.5x-100.jpg)
> __Img Source__: *https://www.zohowebstatic.com/sites/default/files/u1590/050.5x-100.jpg*

<br>
<br>
<br>

## __2. Certificats d'autenticació / OpenSSL__

Els pirates informàtics mai no desapareixeran, però una cosa que podem fer és que sigui pràcticament impossible penetrar en els sistemes (per exemple, xarxes Wi-Fi, sistemes de correu electrònic, xarxes internes) mitjançant la implementació __d'autenticació basada__ en __certificats__ per a totes les màquines i dispositius dels empleats. 

Això vol dir que només els punts finals amb certificats configurats correctament poden accedir als seus sistemes i xarxes. 

Els certificats són fàcils d'usar (no cal maquinari addicional per administrar o es necessita molta capacitació de l'usuari) i les implementacions es poden automatitzar per simplificar les coses i fer que els hackers tinguin més difícil un atac.

![](https://i0.wp.com/systemzone.net/wp-content/uploads/2021/07/Generating-Self-Signed-SSL-Certificate-with-OpenSSL.png?resize=860%2C484&ssl=1)
> __Img Source__: *https://i0.wp.com/systemzone.net/wp-content/uploads/2021/07/Generating-Self-Signed-SSL-Certificate-with-OpenSSL.png?resize=860%2C484&ssl=1*

<br>
<br>
<br>

## __3. Evitar les xarxes públiques i obertes__

Com hem vist, una de les tècniques més utilitzades per dur a terme atacs Man in the Middle és a través de xarxes configurades de manera maliciosa . Per tant, cal intentar evitar les xarxes públiques i aquelles que tinguin un xifratge feble o que estiguin obertes. Així tindrem més garanties que les nostres connexions estan assegurades.

Ens hem d'assegurar que les xarxes a què accedim són reals, segures i que no seran un problema per a la nostra seguretat. Així podrem protegir la informació alhora de navegar. Parlem per exemple d'un Wi-Fi que ens trobem a un aeroport o centre comercial. No sabem realment qui pot estar darrere i de quina manera podria interceptar la connexió i afectar-nos.

![](https://live.staticflickr.com/4499/37622593796_79b49979a0_b.jpg)
> __Img Source__: *https://live.staticflickr.com/4499/37622593796_79b49979a0_b.jpg*

<br>
<br>
<br>

## __4. Utilitzar eines per navegar a HTTPS__
Si naveguem per pàgines HTTP , la nostra informació pot ser interceptada. Això fa que alguna cosa bàsica per evitar ser víctimes d'aquest tipus d'atacs sigui navegar només mitjançant pàgines HTTPS, que són aquells llocs xifrats.

Ara bé, podem fer ús d'eines que ens ajuden a fer-ho. Hi ha extensions que ens permeten navegar únicament per llocs HTTPS i així no comprometre les nostres dades. També, els navegadors més moderns solen llançar un avís quan intentem entrar a una web que no és segura. Això ens pot servir d'ajuda per no entrar a pàgines que puguin ser un perill.

![](https://www.softzone.es/app/uploads-softzone.es/2018/04/HTTP-y-HTTPS.jpg)
> __Img Source__: *https://www.softzone.es/app/uploads-softzone.es/2018/04/HTTP-y-HTTPS.jpg*

<br>
<br>
<br>

## __5. Utilitzar serveis VPN__

L'ús de serveis VPN pot ajudar a prevenir els atacs Man in the Middle quan naveguem per pàgines que no estiguin xifrades o des de xarxes Wi-Fi públiques. Hi ha moltes opcions tant gratuïtes com de pagament i tenen com a objectiu xifrar les nostres connexions. És un tipus d'eines que cal considerar.

Les podem fer servir tant en ordinadors com també en mòbils. Així podem navegar amb més garanties i no tenir problemes. Fins i tot ens permeten accedir a determinats llocs que puguin estar restringits segons la ubicació geogràfica que tinguem, com seria per exemple si estem de viatge i volem veure contingut d'Espanya que pugui estar limitat.

![](https://blog.desdelinux.net/wp-content/uploads/2020/06/vpn-seguridad.jpg)
> __Img Source__: *https://blog.desdelinux.net/wp-content/uploads/2020/06/vpn-seguridad.jpg*

<br>
<br>
<br>

## __6. Protegir la integritat dels nostres comptes d'usuari__
Per evitar intrusos que puguin dur a terme aquest tipus datacs una cosa que hem de tenir en compte és la protecció dels nostres comptes. Amb això ens referim a utilitzar contrasenyes que siguin fortes i complexes , però també l'ús de mètodes com l'autenticació en dos passos per evitar que algú hi pogués accedir.

És important que els nostres comptes a Internet estiguin perfectament protegits. Només així podrem evitar intrusos que puguin interceptar les nostres comunicacions. Això també aplica a qualsevol registre que realitzem amb els nostres dispositius, ja que tot el contingut que hi emmagatzemem podria veure's compromès.

<br>
<br>
<br>

## __7. Compte amb els correus electrònics__
A través del correu electrònic es podria dur a terme un atac daquest tipus. Per exemple, podrien enviar un document fent-se passar per l'altra part simplement per obtenir informació sobre un tema determinat.

Cal prendre precaucions a l'hora d'obrir, llegir o respondre correus que rebem. Sempre cal assegurar-se que l'emissor és realment qui diu que és i no és un impostor que pugui recopilar la nostra informació. És un mitjà molt utilitzat pels pirates informàtics per llançar els seus atacs, robar claus d'accés o afectar la seguretat d'alguna manera.

<br>
<br>
<br>

## __8. Mantenir els sistemes actualitzats__
Per descomptat una cosa que no pot faltar és tenir els sistemes i aplicacions actualitzats . Amb això ens referim al sistema operatiu, al navegador, així com a qualsevol altre tipus d'eines que utilitzem. Cal tenir en compte que de vegades sorgeixen vulnerabilitats que poden ser aprofitades pels pirates informàtics per dur a terme els seus atacs.

Per tant, seguint aquests passos que hem esmentat podem evitar els atacs Man in the Middle i altres de similars que puguin comprometre la nostra seguretat. Serà molt important protegir els equips, tenir-los actualitzats, així com comptar amb programes de seguretat que ens puguin ajudar en el nostre dia a dia.

<br>
<br>
<br>

# __Exemple MITM (_Eavesdropping_)__

__Eavesdropping__, és un terme traduït al català que és escoltar d'incògnit.

És l'acte d'escoltar en secret o sigil·losament converses privades o comunicacions d'altres sense el seu consentiment. 

La pràctica és àmpliament considerada com poc ètica, i en moltes jurisdiccions és il·legal. 

D'altra banda, aquesta pràctica s'ha utilitzat tradicionalment en àmbits relacionats amb la seguretat , com ara escoltar trucades telefòniques.

![](https://blog.malwarebytes.com/wp-content/uploads/2018/07/shutterstock_758712814-900x506.jpg)
> __Img Source__: *https://blog.malwarebytes.com/wp-content/uploads/2018/07/shutterstock_758712814-900x506.jpg*
<br>

### __MITM - Eavesdropping (Sniffing) (BETTERCAP)__ 

Amb l'ARP Poisoning d'abans activarem un _sniffer_ i estarem escoltant la màquina afectada i veient les pàgines on visita. Podem captar credencials de pàgines HTTP.

1. Obrir el Bettercap a Kali Linux.

2. Tenim una interfície senzilleta per començar a fer l'atac Man in the Middle. Si fem ``help` podrem veure tots els mòduls disponibles.

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/HELP-BETTERCAP.PNG?raw=true)

<br>
<br>
<br>

2. Amb la comanda següent `net.show` ens mostrarà la IP - MAC - Nom local. Seguidament fem un `net.probe on` per observar de forma interactiva i per fer-ho més bonic, amb un `ticker on`

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BET0.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BETTERCAP-arspoofing.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/Bettercaps.png?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>
![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BETTERCAP-TICKER.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*

<br>
<br>
<br>

3. A partir d'aquest moment, quan ja hem escollit la IP de la víctima. Ja podem començar amb el ARP.SPOOF. Posem ``arp.spoof on``

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BET3.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BET1.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/BET2.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*
<br>

4. Finalment introduïnt `net.sniff on` podrem veure tota l'activitat de la víctima en tot moment, estarem fent __eavesdropping__ i redirigint els paquets al host de l'atacant per tal de observar i analitzar el tràfic de la víctima. Inclós pot agafar-li les credencials, però només de HTTP!.

![](https://github.com/KeshiKiD03/asixproject2k22/blob/main/Photos/MAN-IN-THE-MIDDLE-ATTACK.PNG?raw=true)
> __Img Source__: *@Aaron & @Cristian 's GitHub*

<br>
<br>
<br>
<br>

## --> [ [Tornar a Ciberseguretat](https://github.com/KeshiKiD03/asixproject2k22/blob/main/README.md) ] <--

# __Bibliografia__

- https://www.redseguridad.com/actualidad/ciberseguridad/ataques-man-in-the-middle-como-detectarlos-y-prevenirlos_20210628.html
- https://protecciondatos-lopd.com/empresas/ataque-man-in-the-middle/
- https://latam.kaspersky.com/resource-center/threats/man-in-the-middle-attack
- https://www.redeszone.net/tutoriales/seguridad/ataques-man-in-the-middle-evitar/
- https://www.youtube.com/watch?v=LEPEk5pFffw - MITM ETTERCAP
- https://www.youtube.com/watch?v=bEMwES6TQUw - MITM SSLSTRIP
- https://www.youtube.com/watch?v=GkexkyUbUd4 - MITM
- https://www.youtube.com/watch?v=-AMd5mxgpX8&t=443s - INTERCEPT SSL TRAFFIC USING MTM SSL STRIP
- https://www.youtube.com/watch?v=-rSqbgI7oZM - SNIFF NETWORK TRAFFIC MITM ATTACK
- https://es.acervolima.com/ataque-mitm-man-in-the-middle-usando-arp-poisoning/ - MITM
